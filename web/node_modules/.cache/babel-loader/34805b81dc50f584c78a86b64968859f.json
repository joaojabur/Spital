{"ast":null,"code":"var _jsxFileName = \"C:\\\\Projetos\\\\Spital\\\\web\\\\src\\\\components\\\\FormMedic\\\\Steps\\\\Review.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport \"./styles.css\";\nimport api from \"../../../services/api\";\nimport { useHistory } from \"react-router-dom\";\nimport Loader from \"react-loader-spinner\";\nimport Accordion from \"@material-ui/core/Accordion\";\nimport AccordionSummary from \"@material-ui/core/AccordionSummary\";\nimport AccordionDetails from \"@material-ui/core/AccordionDetails\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport { IconButton } from \"@material-ui/core\";\nimport EditIcon from \"@material-ui/icons/Edit\";\nimport getPasswordAsterisk from \"../../../utils/HashPassword\";\nimport validateMedicInfo from \"../../../utils/validateMedicInfo\";\nimport { useShareFormMedic } from \"../../../context/ShareMedicFormProvider\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst MedicReview = ({\n  changePage,\n  previousPage\n}) => {\n  _s();\n\n  var _medicData$password, _medicData$birthDate;\n\n  const [backendError, setBackEndError] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n  const {\n    medicData\n  } = useShareFormMedic();\n  const history = useHistory();\n\n  async function handleSubmitClient() {\n    setIsLoading(true);\n    await api.post(\"medics\", { ...medicData\n    }).catch(err => {\n      setBackEndError(err.response.data.error);\n    });\n\n    if (backendError !== null) {\n      setIsLoading(false);\n    } else {\n      console.log(\"Cadastro realizado com sucesso!\");\n    }\n  }\n\n  const [hasError, setHasError] = useState(false);\n  const hashedPassword = getPasswordAsterisk((_medicData$password = medicData === null || medicData === void 0 ? void 0 : medicData.password) !== null && _medicData$password !== void 0 ? _medicData$password : \"\");\n  const [errors, setErrors] = useState(validateMedicInfo(medicData));\n  const formatedBirthDate = medicData === null || medicData === void 0 ? void 0 : (_medicData$birthDate = medicData.birthDate) === null || _medicData$birthDate === void 0 ? void 0 : _medicData$birthDate.replace(/[-]/g, \"/\");\n\n  async function handleSubmitForm(e) {\n    e.preventDefault();\n    const loopedErrors = Object.values(errors);\n    console.log(loopedErrors);\n\n    if (loopedErrors.length > 0) {\n      setHasError(true);\n    } else {\n      handleSubmitClient();\n      alert(\"Cadastro realizado com sucesso!\");\n      setHasError(false);\n      history.push(\"/verificar-email\");\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"form-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Revise seus dados\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"line\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(RenderAccordion, {\n      summary: \"Nome e telefone\",\n      medicInfo: [{\n        type: \"Nome\",\n        info: medicData === null || medicData === void 0 ? void 0 : medicData.firstName\n      }, {\n        type: \"Sobrenome\",\n        info: medicData === null || medicData === void 0 ? void 0 : medicData.lastName\n      }, {\n        type: \"Telefone\",\n        info: medicData === null || medicData === void 0 ? void 0 : medicData.phoneNumber\n      }],\n      index: 0,\n      changePage: changePage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(RenderAccordion, {\n      summary: \"Credenciais\",\n      medicInfo: [{\n        type: \"E-mail\",\n        info: medicData === null || medicData === void 0 ? void 0 : medicData.email\n      }, {\n        type: \"Senha\",\n        info: hashedPassword\n      }],\n      index: 1,\n      changePage: changePage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(RenderAccordion, {\n      summary: \"Dados acad\\xEAmicos\",\n      medicInfo: [{\n        type: \"Área médica\",\n        info: medicData === null || medicData === void 0 ? void 0 : medicData.area\n      }, {\n        type: \"Graduação\",\n        info: medicData === null || medicData === void 0 ? void 0 : medicData.graduation\n      }, {\n        type: \"Mestrado\",\n        info: medicData === null || medicData === void 0 ? void 0 : medicData.masterDegree\n      }, {\n        type: \"Doutorado\",\n        info: medicData === null || medicData === void 0 ? void 0 : medicData.doctorateDegree\n      }],\n      index: 2,\n      changePage: changePage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(RenderAccordion, {\n      summary: \"Dados pessoais\",\n      medicInfo: [{\n        type: \"CPF\",\n        info: medicData === null || medicData === void 0 ? void 0 : medicData.cpf\n      }, {\n        type: \"RG\",\n        info: medicData === null || medicData === void 0 ? void 0 : medicData.rg\n      }, {\n        type: \"Data de nascimento\",\n        info: formatedBirthDate\n      }],\n      index: 3,\n      changePage: changePage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: hasError ? /*#__PURE__*/_jsxDEV(\"span\", {\n        style: {\n          color: \"red\",\n          position: \"relative\",\n          top: \"1rem\",\n          left: \"1rem\"\n        },\n        children: \"O formul\\xE1rio possui erros...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: \"red\",\n        position: \"relative\",\n        top: \"1rem\",\n        left: \"1rem\"\n      },\n      children: backendError\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"secondary\",\n      onClick: e => previousPage(),\n      children: \"Anterior\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleSubmitForm,\n      className: \"primary\",\n      children: isLoading ? /*#__PURE__*/_jsxDEV(Loader, {\n        type: \"Circles\",\n        color: \"#00BFFF\",\n        height: 50,\n        width: 50,\n        timeout: 3000\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Cadastrar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 5\n  }, this);\n};\n\n_s(MedicReview, \"jqN3U6eyztiIAuaLyjQxTQUVYMI=\", false, function () {\n  return [useShareFormMedic, useHistory];\n});\n\n_c = MedicReview;\nexport const RenderAccordion = ({\n  summary,\n  medicInfo,\n  index,\n  changePage\n}) => {\n  return /*#__PURE__*/_jsxDEV(Accordion, {\n    children: [/*#__PURE__*/_jsxDEV(AccordionSummary, {\n      expandIcon: /*#__PURE__*/_jsxDEV(ExpandMoreIcon, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 37\n      }, this),\n      children: summary\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(AccordionDetails, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(ListItemText, {\n          children: medicInfo.map((data, index) => {\n            return /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                display: \"block\",\n                fontWeight: \"normal\"\n              },\n              className: \"dados\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  fontWeight: \"bold\",\n                  marginRight: \"1rem\"\n                },\n                children: [data.type, \":\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 196,\n                columnNumber: 19\n              }, this), data.info]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 17\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: e => changePage(index),\n          children: /*#__PURE__*/_jsxDEV(IconButton, {\n            component: \"span\",\n            color: \"primary\",\n            children: /*#__PURE__*/_jsxDEV(EditIcon, {\n              className: \"editar-icone\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 206,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 182,\n    columnNumber: 5\n  }, this);\n};\n_c2 = RenderAccordion;\nexport default MedicReview;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"MedicReview\");\n$RefreshReg$(_c2, \"RenderAccordion\");","map":{"version":3,"sources":["C:/Projetos/Spital/web/src/components/FormMedic/Steps/Review.tsx"],"names":["React","useState","api","useHistory","Loader","Accordion","AccordionSummary","AccordionDetails","ListItemText","ExpandMoreIcon","IconButton","EditIcon","getPasswordAsterisk","validateMedicInfo","useShareFormMedic","MedicReview","changePage","previousPage","backendError","setBackEndError","isLoading","setIsLoading","medicData","history","handleSubmitClient","post","catch","err","response","data","error","console","log","hasError","setHasError","hashedPassword","password","errors","setErrors","formatedBirthDate","birthDate","replace","handleSubmitForm","e","preventDefault","loopedErrors","Object","values","length","alert","push","type","info","firstName","lastName","phoneNumber","email","area","graduation","masterDegree","doctorateDegree","cpf","rg","color","position","top","left","RenderAccordion","summary","medicInfo","index","map","display","fontWeight","marginRight"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport \"./styles.css\";\r\nimport api from \"../../../services/api\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport Loader from \"react-loader-spinner\";\r\nimport Accordion from \"@material-ui/core/Accordion\";\r\nimport AccordionSummary from \"@material-ui/core/AccordionSummary\";\r\nimport AccordionDetails from \"@material-ui/core/AccordionDetails\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\r\nimport { IconButton } from \"@material-ui/core\";\r\nimport EditIcon from \"@material-ui/icons/Edit\";\r\nimport getPasswordAsterisk from \"../../../utils/HashPassword\";\r\nimport validateMedicInfo from \"../../../utils/validateMedicInfo\";\r\nimport { useShareFormMedic } from \"../../../context/ShareMedicFormProvider\";\r\n\r\ninterface MedicReviewProps {\r\n  changePage: (index: number) => void;\r\n  previousPage: () => void;\r\n}\r\n\r\nconst MedicReview = ({ changePage, previousPage }: MedicReviewProps) => {\r\n  const [backendError, setBackEndError] = useState(\"\");\r\n\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const { medicData } = useShareFormMedic();\r\n\r\n  const history = useHistory();\r\n\r\n  async function handleSubmitClient() {\r\n    setIsLoading(true);\r\n\r\n    await api\r\n      .post(\"medics\", {\r\n        ...medicData,\r\n      })\r\n      .catch((err) => {\r\n        setBackEndError(err.response.data.error);\r\n      });\r\n\r\n    if (backendError !== null) {\r\n      setIsLoading(false);\r\n    } else {\r\n      console.log(\"Cadastro realizado com sucesso!\");\r\n    }\r\n  }\r\n\r\n  const [hasError, setHasError] = useState(false);\r\n\r\n  const hashedPassword = getPasswordAsterisk(medicData?.password ?? \"\");\r\n\r\n  const [errors, setErrors] = useState(validateMedicInfo(medicData));\r\n\r\n  const formatedBirthDate = medicData?.birthDate?.replace(/[-]/g, \"/\");\r\n\r\n  async function handleSubmitForm(e: any) {\r\n    e.preventDefault();\r\n    const loopedErrors = Object.values(errors);\r\n    console.log(loopedErrors);\r\n    if (loopedErrors.length > 0) {\r\n      setHasError(true);\r\n    } else {\r\n      handleSubmitClient();\r\n      alert(\"Cadastro realizado com sucesso!\");\r\n      setHasError(false);\r\n      history.push(\"/verificar-email\");\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"form-container\">\r\n      <h2>Revise seus dados</h2>\r\n      <div className=\"line\"></div>\r\n      <RenderAccordion\r\n        summary=\"Nome e telefone\"\r\n        medicInfo={[\r\n          { type: \"Nome\", info: medicData?.firstName },\r\n          { type: \"Sobrenome\", info: medicData?.lastName },\r\n          { type: \"Telefone\", info: medicData?.phoneNumber },\r\n        ]}\r\n        index={0}\r\n        changePage={changePage}\r\n      />\r\n      <RenderAccordion\r\n        summary=\"Credenciais\"\r\n        medicInfo={[\r\n          { type: \"E-mail\", info: medicData?.email },\r\n          { type: \"Senha\", info: hashedPassword },\r\n        ]}\r\n        index={1}\r\n        changePage={changePage}\r\n      />\r\n      <RenderAccordion\r\n        summary=\"Dados acadêmicos\"\r\n        medicInfo={[\r\n          { type: \"Área médica\", info: medicData?.area },\r\n          { type: \"Graduação\", info: medicData?.graduation },\r\n          { type: \"Mestrado\", info: medicData?.masterDegree },\r\n          { type: \"Doutorado\", info: medicData?.doctorateDegree },\r\n        ]}\r\n        index={2}\r\n        changePage={changePage}\r\n      />\r\n      <RenderAccordion\r\n        summary=\"Dados pessoais\"\r\n        medicInfo={[\r\n          { type: \"CPF\", info: medicData?.cpf },\r\n          { type: \"RG\", info: medicData?.rg },\r\n          { type: \"Data de nascimento\", info: formatedBirthDate },\r\n        ]}\r\n        index={3}\r\n        changePage={changePage}\r\n      />\r\n\r\n      <p>\r\n        {hasError ? (\r\n          <span\r\n            style={{\r\n              color: \"red\",\r\n              position: \"relative\",\r\n              top: \"1rem\",\r\n              left: \"1rem\",\r\n            }}\r\n          >\r\n            O formulário possui erros...\r\n          </span>\r\n        ) : (\r\n          <span></span>\r\n        )}\r\n      </p>\r\n\r\n      <p\r\n        style={{\r\n          color: \"red\",\r\n          position: \"relative\",\r\n          top: \"1rem\",\r\n          left: \"1rem\",\r\n        }}\r\n      >\r\n        {backendError}\r\n      </p>\r\n\r\n      <button className=\"secondary\" onClick={(e) => previousPage()}>\r\n        Anterior\r\n      </button>\r\n      <button onClick={handleSubmitForm} className=\"primary\">\r\n        {isLoading ? (\r\n          <Loader\r\n            type=\"Circles\"\r\n            color=\"#00BFFF\"\r\n            height={50}\r\n            width={50}\r\n            timeout={3000}\r\n          />\r\n        ) : (\r\n          <p>Cadastrar</p>\r\n        )}\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\ninterface RenderAccorditionProps {\r\n  summary: string;\r\n  medicInfo: Array<{\r\n    type: string;\r\n    info: string;\r\n  }>;\r\n  index: number;\r\n  changePage: (index: number) => void;\r\n}\r\n\r\nexport const RenderAccordion: React.FC<RenderAccorditionProps> = ({\r\n  summary,\r\n  medicInfo,\r\n  index,\r\n  changePage,\r\n}) => {\r\n  return (\r\n    <Accordion>\r\n      <AccordionSummary expandIcon={<ExpandMoreIcon />}>\r\n        {summary}\r\n      </AccordionSummary>\r\n      <AccordionDetails>\r\n        <div>\r\n          <ListItemText>\r\n            {medicInfo.map((data, index) => {\r\n              return (\r\n                <span\r\n                  style={{ display: \"block\", fontWeight: \"normal\" }}\r\n                  key={index}\r\n                  className=\"dados\"\r\n                >\r\n                  <span style={{ fontWeight: \"bold\", marginRight: \"1rem\" }}>\r\n                    {data.type}:\r\n                  </span>\r\n                  {data.info}\r\n                </span>\r\n              );\r\n            })}\r\n          </ListItemText>\r\n          <button onClick={(e) => changePage(index)}>\r\n            <IconButton component=\"span\" color=\"primary\">\r\n              <EditIcon className=\"editar-icone\" />\r\n            </IconButton>\r\n          </button>\r\n        </div>\r\n      </AccordionDetails>\r\n    </Accordion>\r\n  );\r\n};\r\n\r\nexport default MedicReview;\r\n"]},"metadata":{},"sourceType":"module"}